# Spark-Yun å¤šç³»ç»Ÿå®‰è£…è„šæœ¬

è¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–åçš„ Spark-Yun å®‰è£…è„šæœ¬ï¼Œæ”¯æŒå¤šä¸ªæ“ä½œç³»ç»Ÿå’Œæ¶æ„ã€‚

## ğŸš€ ç‰¹æ€§

### å¤šç³»ç»Ÿæ”¯æŒ
- **Linux**: Ubuntu, CentOS, RHEL, Fedora, Arch Linux, openSUSE
- **macOS**: Intel å’Œ Apple Silicon (M1/M2)
- **Windows**: WSL, Cygwin, MSYS2

### å¤šæ¶æ„æ”¯æŒ
- **x86_64** (AMD64)
- **ARM64** (AArch64)
- **ARMv7** (32ä½ARM)

### æ™ºèƒ½æ£€æµ‹
- è‡ªåŠ¨æ£€æµ‹æ“ä½œç³»ç»Ÿå’ŒCPUæ¶æ„
- è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åŒ…ç®¡ç†å™¨
- è‡ªåŠ¨é€‰æ‹©ä¸‹è½½å·¥å…· (curl/wget)
- æ™ºèƒ½ä¾èµ–æ£€æŸ¥å’Œå®‰è£…å»ºè®®

### å¢å¼ºåŠŸèƒ½
- **å½©è‰²è¾“å‡º**: æ¸…æ™°çš„çŠ¶æ€æ˜¾ç¤º
- **è¿›åº¦æ˜¾ç¤º**: å®æ—¶ä¸‹è½½è¿›åº¦
- **é”™è¯¯é‡è¯•**: è‡ªåŠ¨é‡è¯•å¤±è´¥çš„ä¸‹è½½
- **æ–­ç‚¹ç»­ä¼ **: æ”¯æŒå·²ä¸‹è½½æ–‡ä»¶çš„è·³è¿‡
- **æ‰¹é‡å¤„ç†**: é«˜æ•ˆçš„æ‰¹é‡ä¸‹è½½
- **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„å®‰è£…è¿‡ç¨‹è®°å½•

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€å‘½ä»¤
- `tar` - è§£å‹ç¼©å·¥å…·
- `java` - Javaè¿è¡Œç¯å¢ƒ (JDK 11+)
- `node` - Node.jsè¿è¡Œç¯å¢ƒ
- `curl` æˆ– `wget` - ä¸‹è½½å·¥å…·

### å¯é€‰å·¥å…·
- `pnpm` - åŒ…ç®¡ç†å™¨ (è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…)

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x install.sh

# è¿è¡Œå®‰è£…è„šæœ¬
./install.sh
```

### æ£€æŸ¥ç³»ç»Ÿå…¼å®¹æ€§
è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿç¯å¢ƒå¹¶æä¾›å®‰è£…å»ºè®®ï¼š

#### Ubuntu/Debian
```bash
sudo apt update && sudo apt install tar openjdk-11-jdk nodejs npm
```

#### CentOS/RHEL/Fedora
```bash
sudo yum install tar java-11-openjdk-devel nodejs npm
# æˆ–è€…ä½¿ç”¨ dnf
sudo dnf install tar java-11-openjdk-devel nodejs npm
```

#### macOS
```bash
# å®‰è£… Homebrew (å¦‚æœæœªå®‰è£…)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…ä¾èµ–
brew install openjdk@11 node
```

## ğŸ“ ç›®å½•ç»“æ„

å®‰è£…å®Œæˆåï¼Œé¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
spark-yun/
â”œâ”€â”€ install.sh                    # å®‰è£…è„šæœ¬
â”œâ”€â”€ install-config.json          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ tmp/                     # ä¸´æ—¶ä¸‹è½½ç›®å½•
â”‚   â”œâ”€â”€ jdbc/system/             # æ•°æ®åº“é©±åŠ¨
â”‚   â””â”€â”€ libs/                    # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ spark-yun-dist/
â”‚   â””â”€â”€ spark-min/               # Sparkç²¾ç®€ç‰ˆ
â””â”€â”€ spark-yun-backend/
    â””â”€â”€ spark-yun-main/src/main/resources/  # PRQLäºŒè¿›åˆ¶æ–‡ä»¶
```

## ğŸ”§ é…ç½®æ–‡ä»¶

`install-config.json` åŒ…å«æ‰€æœ‰ä¸‹è½½é…ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ï¼š

- **ä¸‹è½½URL**: ä¿®æ”¹ `download_config.base_url`
- **Sparkç‰ˆæœ¬**: ä¿®æ”¹ `download_config.spark`
- **ä¾èµ–åˆ—è¡¨**: ä¿®æ”¹å„ä¸ªæ•°ç»„ä¸­çš„æ–‡ä»¶åˆ—è¡¨
- **ç³»ç»Ÿè¦æ±‚**: ä¿®æ”¹ `system_requirements`

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é”™è¯¯**
   ```bash
   chmod +x install.sh
   ```

2. **ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - è„šæœ¬ä¼šè‡ªåŠ¨é‡è¯•3æ¬¡
   - å¯ä»¥é‡æ–°è¿è¡Œè„šæœ¬ç»§ç»­ä¸‹è½½

3. **Javaç‰ˆæœ¬é—®é¢˜**
   ```bash
   # æ£€æŸ¥Javaç‰ˆæœ¬
   java -version
   
   # åº”è¯¥æ˜¯Java 11æˆ–æ›´é«˜ç‰ˆæœ¬
   ```

4. **Node.jsç‰ˆæœ¬é—®é¢˜**
   ```bash
   # æ£€æŸ¥Node.jsç‰ˆæœ¬
   node --version
   
   # å»ºè®®ä½¿ç”¨Node.js 16+
   ```

### æ—¥å¿—åˆ†æ

è„šæœ¬æä¾›è¯¦ç»†çš„å½©è‰²è¾“å‡ºï¼š
- ğŸ”µ **[INFO]**: ä¿¡æ¯æç¤º
- ğŸŸ¢ **[SUCCESS]**: æˆåŠŸæ“ä½œ
- ğŸŸ¡ **[WARNING]**: è­¦å‘Šä¿¡æ¯
- ğŸ”´ **[ERROR]**: é”™è¯¯ä¿¡æ¯

### æ‰‹åŠ¨å®‰è£…

å¦‚æœè‡ªåŠ¨å®‰è£…å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½æ–‡ä»¶ï¼š

1. ä» `https://isxcode.oss-cn-shanghai.aliyuncs.com/zhiqingyun/install/` ä¸‹è½½æ‰€éœ€æ–‡ä»¶
2. å°†æ–‡ä»¶æ”¾ç½®åˆ°å¯¹åº”ç›®å½•
3. é‡æ–°è¿è¡Œè„šæœ¬

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°ä¾èµ–ç‰ˆæœ¬
1. ä¿®æ”¹ `install-config.json` ä¸­çš„ç‰ˆæœ¬å·
2. é‡æ–°è¿è¡Œå®‰è£…è„šæœ¬

### æ·»åŠ æ–°çš„æ•°æ®åº“é©±åŠ¨
1. åœ¨ `install-config.json` çš„ `jdbc_drivers` æ•°ç»„ä¸­æ·»åŠ æ–°æ–‡ä»¶
2. é‡æ–°è¿è¡Œè„šæœ¬

### æ”¯æŒæ–°çš„æ“ä½œç³»ç»Ÿ
1. åœ¨è„šæœ¬çš„ `detect_os()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„ç³»ç»Ÿæ£€æµ‹
2. åœ¨ `detect_package_manager()` ä¸­æ·»åŠ åŒ…ç®¡ç†å™¨æ”¯æŒ
3. æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„ç³»ç»Ÿè¦æ±‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
- æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
- CPUæ¶æ„
- é”™è¯¯æ—¥å¿—
- ç½‘ç»œç¯å¢ƒ

## ğŸ“„ è®¸å¯è¯

æœ¬è„šæœ¬éµå¾ªé¡¹ç›®çš„å¼€æºè®¸å¯è¯ã€‚
